#!/usr/bin/env bash

### PARTIAL SCRIPT ######
### REQUIRES PROMPTS ####

output 'Installing the base system (it may take a while).'

pacstrap /mnt base base-devel linux linux-lts linux-headers linux-firmware dkms \
  btrfs-progs e2fsprogs dosfstools xfsprogs nilfs-utils zram-generator \
  acpi lm_sensors fwupd dmraid device-mapper ell \
  grub grub-btrfs efibootmgr \
  snapper snap-pac apparmor \
  cups cups-filters cups-pdf \
  networkmanager iptables-nft ufw openssh chrony reflector fail2ban bind nfs-utils wpa_supplicant wireless_tools \
  tree curl perl less nano vim man-pages man-db wget diffutils logrotate cronie clang git inotify-tools neovim \
  xdg-utils xdg-user-dirs accountsservice

CPU=$(grep vendor_id /proc/cpuinfo)
if [[ "${CPU}" == *"AuthenticAMD"* ]]; then
  microcode=amd-ucode
else
  microcode=intel-ucode
fi

pacstrap /mnt "${microcode}"
