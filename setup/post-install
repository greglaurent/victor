#!/usr/bin/env bash

utils::is_root

# Secure boot enrollment
sudo sbctl enroll-keys
sudo sbctl sign /boot/efi/EFI/GRUB/grubx64.efi

# Set firewall
sudo ufw limit 22/tcp
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw default deny incoming
sudo ufw default allow outgoing
sudo ufw enable

sudo vic setup pacman

user="$(logname)"
sudo --user "${user}" bash <<HereTag

echo "[MSG] VICTOR running post-install as: ${user}"
vic setup dev git
vic setup dev rust
vic setup paru
HereTag

# pacman -Sy plasma-meta sddm \
#   zsh flatpak fzf lazygit ripgrep wl-clipboard kitty wezterm \
# vlc mpv yq
#
# pacman -Sy plasma-meta sddm \
#   zsh fzf lazygit ripgrep wl-clipboard kitty wezterm \
# vlc mpv yq
#
# systemctl enable sddm
